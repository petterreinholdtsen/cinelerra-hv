11/7/01

Mask feathering and value implemented.  Crash bug in
CWindowMaskGUI::get_keyframe fixed.





11/22/01

Removed memory leak in VirtualConsole.  Another case of base destructor
calling base methods only.

Time average finally implemented. Deinterlace implemented.

Translation in screencapture recording implemented.

AVI parameter editing box.

Drag and drop of assets during an index build doesn't lock up. 
Dragging mixtures of audio and video works better.  Better handling of
shared effects which are off.

Batches can be moved up and down the list.





12/6/01

OpenDIVX debugging:

Fixed bugs in decore2: *run = *last = -1; was not copied over from
encore50.

Rewrote bitstream parser in encore2 and decore2 to be more reliable.

Disabled MMX due to crashes in Redhat 7.2.

Discovered decore2 can't do P frames so switched back to decore50.

Renamed header files, symbols to all
in the same program.

Renamed more symbols in mpeg2enc to coexist with opendivx.

To make encore2 work on 64 bit processors:

Typecasted offsets in CompensateBlock and get_ref to (int)

Decore50 still not functional on 64 bit processors.




Implemeneted PNG list output.  Debugged list output and input.

Configuration dialog for OpenDivx in Cinelerra migrated from encore50
to encore2.

Configuration dialog for Vorbis and Vorbis export to Quicktime.

Can use shift-R to render.

DV encoding implemented.  The last libdv library only supported MMX and
B&W.




12/16/01

Moved all OpenDivx support to the encore50 derivative of the encoder. 
This appears to do everything that the encore2 derivative could do at
equal or lesser reliability.

Changed bmp argument for decore50 to 3 member array.  Added quant
argument which, when set to nonzero, fixes the quantization.  OpenDivx
with fixed quantization looks 33% better than MPEG-2.

Direct copy rendering for OpenDivx so output of the renderfarm can be
direct copied into a single file.

Moved all theme support into a plugin.  Resources are no longer
compiled in but concatenated to the binaries.  This made compilation
take less time and should theoretically allow more themes to be
supported without increasing resident set size.

Made ports specific to each render node instead of global.  This way
multiple Cinelerra clients can run on the same box without violating
the single thread requirement of new libraries.

Cinelerra daemon forks to background.  Made assets export more
compression parameters to render nodes.

Vorbis decoding in Quicktime without seeking.  The encoding is probably
not going to change anymore but Vorbis doesn't appear seekable.  No-one
is going to use OpenDivx and Vorbis without an endorsement from
Microsoft anyway.







12/22/01

Seeking support for Quicktime/Vorbis.  Support for Vorbis on 64 bit
processors.  Further debugging of Divx.  Quality of 6 yields errors in
output.  Quality of 5 seems to be the maximum.  Changed fourcc from
VBIS to OggS for vorbis.

To make Vorbis work on 64 bit processors:

change sizeof(int) to sizeof(int*) in lib/floor1.c: 263

Menu effects can paste into the timeline.

Changes in label handling when pasting resources.

Statusbar and zoombar resizing restored.

Implemented code to move plugin sets up and down a level.

Improved table of contents support for libmpeg3.  This scans every byte
of the mpeg files and records the location of every keyframe and every
sample of audio.  The table of contents can then be loaded by
Cinelerra, allowing frame accurate editing from mpeg source material.

A memory allocation bug in the Linux kernel crashes the system when
using mpeg3toc on DVD's so forget about transcoding Starwars on a
render farm.  Don't know who discovered that either.







12/28/01

Ignored the warnings and set -ieee for all files in quicktime to fix
floating point exceptions.  This made it twice as slow but it worked.

Floating point exceptions in the following places were fixable with
certain changes:

vorbis_lpc_predict    ->  A return statement before anything is done.
bark_noise_pointmp    ->  noise[i] could be set to 0
bark_noise_hybridmp   ->  noise[i] could be set to 0

Defining VORBIS_IEEE_FLOAT32 seemed to fix mapping0 crashes so the
preceeding changes were backed out.

Loading XML files with multiple video tracks works better.

Linux 2.4.17 handles DVD table of contents operations better but
crashes after 5 hours of reading a DVD.  You'll have to reboot often to
control memory corruption.







1/4/02

Credit for official Microsoft software even though there isn't any
official Microsoft software. 

Records to DV again but not under kernels after 2.4.7.  

New audio effects:
Tone generator
Reverse audio
Delay audio

3rd attempt to improve main window scrollbars.






1/11/02

New video effects:
Delay video
Reverse video
Swap channels

New audio effects:
Denoise
Parametric EQ using fast fourier transform.  This isn't standard but 
it gives real gaussian curves.
Spectrogram
Time stretch
Resample
Pitch shift

Frequency table expanded in Units.  This uses real 1/3 octave steps.

Flipped U and V in opendivx encoder so it conforms to YUV order on
disk.

Reconfiguration during audio rendering reenabled.

Constitutive reconfiguration for video turned off.  This was used to
debug the memory leaks.

Icon for Normalize.  Tone generator improvement.





1/18/02

New audio effects:
Compressor


New video effects:
Denoise
Frame to field conversion
Field to frame conversion
Reframe

Video denoise uses the average of an arbitrary number of previous
frames to predict what the value for the next frame should be.  This
can also be used as a threshold effect or a time average.

Optimized time average.




1/25/02

Plugin keyframes loaded from XML.
Correct rendering of plugin keyframes.  Some plugins interpolate.
Most plugin GUI's update when insertion point is moved among keyframes.
Plugin keyframes draw when created.
Cursor jumps to plugin keyframes when selected.
Samplerate adjustable in all media info windows.
Samplerate and framerate adjustments not overridden when loaded in an EDL.
Improved fade automation rendering.

New video effects:
Oil painting
Whirl/pinch
Polar
Rotation
Waves
Waveform/Vectorscope
Hue/Saturation
YUV adjustment
Invert video

New audio effect:
Invert audio







2/1/02

Progress windows really cancel instead of just letting you press the
button.
Status bar shows how long something took when it finishes.
Removed Send and Recieve options from effects.  It was never needed and it 
complicated the use of variable track sizes.

First stage of making width and height specific to tracks and renamed 
projector size to canvas size.
More interpolation for effects.
Second stage of titler.






2/8/02
Pasting effect keyframes works better.
Improved extension and contraction of effects during clear and paste.
Automation for more effects.
Effect keyframe behavior is more predictable.
For a good time enable auto keyframes and type stuff into the titler while playing back.
Clearing VFrames clears the alpha too.
Added a tests directory and stored some test EDLs.
Blur can selectively blur single channels
Effects can be attached to tracks with no data via a popup menu finally.
Plugin GUI's are more often updated when tracks are deleted.

Final stage of titling implementation.
Chromakey and lumakey



2/15/02
Effects more accurately follow edits while cutting and pasting.
More accurate keyframing in effects.
Video Transitions restored.
Audio transitions enabled.
Transition length inputted in seconds.
Stepped up the number of previous files displayed.
Option to disable tracks when no edits was removed.  The VConsole automatically
detects when effects synthesize material.
Independant track sizes can now be changed with a popup menu.
Renderfarm more accurately calculates balanced loads.
Disabled avifile to reduce the debugging noise.
Removed memory leak from Quicktime MPEG-4 decoder.
Slightly optimized resource window updates after loading.

Linux 2.4.17 crashes probably because Cinelerra moves too much memory
around.  We disabled kswapd by putting a return 0; in
/usr/src/linux/mm/vmscan.c.  The operating system seems more stable now.

Enabled deletion of assets and clips from the project.  Also can delete
assets from disk.
Rebuild indices should handle multiple indices if selected.

Rectangle selection in asset window.  The heroine background was
lightened but mind you, the heroine background is a permanent feature.

Latest seeking issue fixed in libmpeg3.  Looking for ways to shift
audio based on the pts.
Compositor window tumblers work better.
More verbose overlays for camera, projector, and output regions, making 
it easier to visualize the compositing pipeline.
Easier to use magnifying glass.
Middle mouse button dragging in CWindow works.


new video transitions:
bandslide
bandwipe
slide
wipe
irissquare







2/22/02

Implemented another MPEG-2 bitrate control algorithm.  YUV 4:2:2 MPEG-2
in fixed bitrate modes above 7000000 is recommended for DV footage for
now.

Assets and effects are now sortable in the Resource window.  Text
displays aren't corrupted as much.

Certain EDL load operations honor the labels follow edits setting and
certain load operations insert labels constitutively.

Width and height of tracks load properly.  Adjustments to track width
and height render more often.

Playback automation always restored from undos.

Improved tracking when every frame is played.  Smooth scrolling during
playback is now supported.

Right mouse button doesn't activate selection rectangles anymore.
AVIFile disabled since it doesn't support GCC 3.0 anymore.
More reliable reading of individual image files.
More accurate rendering of fade automation.
More accurate tracking during playback.
Deinterlace with average works.
Certain edit operations from CWindow don't lock up the MWindow anymore.
CWindow scrollbars updatge after loading.
Track canvas after In/Out point dragging is properly refreshed.
Cursor motion over keyframes doesn't force rendering as often.






3/1/02

In/Out clearing crashes less and works better.

Removed IPC modeled semaphores.  Now no IPC stubs are left after a crash.

Rendering nodes and recording batches can be individually toggled.

Buz driver refurbished.  No longer requires kernel hacks to change channels.

Motion JPEG compression library debugged further.  Less corruption.

Playback through Buz driver enabled.  Now adjust color correction and see
it on a monitor.

Playback of video through Firewire implemented.  Still not functional.

YUV 4:2:0 Planar -> YUV 4:2:2 Planar color conversion

Renderengine retools the playback configuration for every command instead of
every EDL change.

Integrated IA-32 assembly language jpeg library.







3/15/02

Enabled assembly language routines in jpeg library.  Added swap fields
option to Buz output driver.

YUV overlay reenabled.  Only works on commercial NVidia drivers.

Libmpeg3 reads transport streams again.

Dissolve debugged further.

Moving out guicast images.  Implementing defaulttheme and microtheme.












3/22/02

Consolidated audio and video settings into a format dialog.
Made XVideo a separate driver.
Continued improvements of defaulttheme.  
Draws MWindow BG and copies top background instead of several MWindow drawing calls.













4/5/02

Re-enabled configurable preloading in Quicktime since moov atoms larger
than 2 M were setting the preload too high.

Frame to field copies two fields into the output instead of line
doubling one field.

Tightened synchronization during recording startup.

CWindow and VWindow timebars implemented.
Timebars in CWindow and VWindow allow a region to be selected for
previewing.

Debugged configuration updates in Synthesizer and Parametric EQ.

Extra redundancies in the jpeg library enabled to get IA-32 assembly
working.

Time average is absolute.

Keybindings and icons for In/Out points changed.

Bezier keyframes less than 10 frames apart don't freeze the CWindow.

Clearing puts the cursor at the in point when using in/out points.

Camera translation from the exact top of a frame to less than the full
height really translates instead of squishing.

Reenabled background_pixmap in TrackCanvas to allow faster overlay drawing.

Loading non-XML files doesn't change the output width and height
anymore.  This allows VWindow to change sources without reverting the
output size.

Loop region loads right.

Pan images aren't corrupted anymore.

Clips created when no region is selected take the entire EDL now.

Parametric EQ reenabled.

Shared effects work again when deleted.

Multiple effects per effect row load properly again.

Jumping to next and prev label from CWindow doesn't lock up when playing back.

Instead of synchronizing the absolute position of each fader, the gang
option now changes the relative position of each fader.

Slider tooltips always update before being shown instead of showing
obsolete data.

Got rid of next record label in RecordGUI. Labels set while recording
are finally inserted in the timeline.  The 'l' key triggers a label
when recording.

Began first stage of Microsoft AVI importer for Quicktime.












